/**!
 * FlexSearch.js v0.7.0 (Light)
 * Copyright 2019 Nextapps GmbH
 * Author: Thomas Wilkerling
 * Licence: Apache-2.0
 * https://github.com/nextapps-de/flexsearch
 */
(function(){'use strict';var u;Object.assign||(Object.assign=function(){for(var a=arguments,b=a.length,c=a[0],e=1,d,h,g;e<b;e++){d=a[e];h=Object.keys(d);g=h.length;for(var f=0,m;f<g;f++)m=h[f],c[m]=d[m]}return c});function v(a){return"string"===typeof a}function y(a){for(var b=Array(a),c=0;c<a;c++)b[c]=B();return b}function B(){return Object.create(null)}function C(a,b){for(var c=0,e=b.length;c<e&&(a=a.replace(b[c],b[c+1]),a);c+=2);return a};var F=/[\W_]+/;function G(a){if(a=a.toLowerCase())if(a&&this.g&&(a=C(a,this.g)),this.h&&1<a.length&&(a=C(a,this.h)),a&&(F||""===F)&&(a=a.split(F),this.filter)){for(var b=this.filter,c=a.length,e=[],d=0,h=0;d<c;d++){var g=a[d];g&&!b[g]&&(e[h++]=g)}a=e}return a};var H=0,I={},J={};function K(a){if(!(this instanceof K))return new K(a);var b=a&&a.id;this.id=b||0===b?b:H++;this.init(a);L(this,"index",function(){return Object.keys(this.a)});L(this,"length",function(){return this.index.length})}K.registerCharset=function(a,b){J[a]=b;return K};K.registerLanguage=function(a,b){I[a]=b;return K};u=K.prototype;
u.init=function(a){var b;a||(a={});var c=a.charset,e=a.lang;v(c)&&(-1===c.indexOf(":")&&(c+=":default"),c=J[c]);v(e)&&(e=I[e]);this.j=b=c&&c.l||a.tokenize||"strict";this.depth="strict"===b&&a.depth||0;this.i=c&&c.i||a.rtl||!1;this.b=a.resolution||9;this.threshold=b=a.threshold||0;this.b<=b&&(this.b=b+1);this.encode=a.encode||c&&c.encode||G;this.g=(b=a.matcher||e&&e.g)&&M(b,!1);this.h=(b=a.stemmer||e&&e.h)&&M(b,!0);if(a=b=a.filter||e&&e.filter)for(a=B(),c=0,e=b.length;c<e;c++)a[b[c]]=1;this.filter=
a;this.f=y(this.b-this.threshold);this.c=B();this.a=B();return this};
u.add=function(a,b,c,e,d){if(b&&v(b)&&(a||0===a)){if(this.a[a]&&!e)return this.update(a,b);if(!d&&c)return this.add(a,b,null,e,!0),c(),this;b=this.encode(b);if(!b.length)return this;c=B();c._ctx=B();e=b.length;d=this.threshold;for(var h=this.depth,g=this.b,f=this.f,m=this.i,t,q=0;q<e;q++){var n=b[q];if(n){t=1;var p=n.length,r=(m?q+1:e-q)/e,l="";switch(this.j){case "reverse":case "both":for(var k=p;--k;)l=n[k]+l,N(f,c,l,a,m?1:(p-k)/p,r,d,g-1);l="";case "forward":for(k=0;k<p;k++)l+=n[k],N(f,c,l,a,m?
(k+1)/p:1,r,d,g-1);break;case "full":for(k=0;k<p;k++)for(var w=(m?k+1:p-k)/p,z=p;z>k;z--)l=n.substring(k,z),N(f,c,l,a,w,r,d,g-1);break;default:if(p=N(f,c,n,a,1,r,d,g-1),h&&1<e&&p>=d)for(p=c._ctx[n]||(c._ctx[n]=B()),n=this.c[n]||(this.c[n]=y(g-(d||0))),r=q-h,l=q+h+1,0>r&&(r=0),l>e&&(l=e);r<l;r++)r!==q&&N(n,p,b[r],a,0,g-(r<q?q-r:r-q),d,g-1)}}}t&&(this.a[a]=1)}return this};u.update=function(a,b,c){this.a[a]&&v(b)&&(this.remove(a),this.add(a,b,c,!0));return this};
u.remove=function(a,b,c){if(this.a[a]){if(!c&&b)return this.remove(a,null,!0),b(),this;for(b=0;b<this.b-(this.threshold||0);b++)Q(this.f[b],a);this.depth&&Q(this.c,a);delete this.a[a]}return this};
u.search=function(a,b,c,e){b&&"function"===typeof b?(c=b,b=1E3):b||0===b||(b=1E3);var d=[],h=a;if("object"===typeof a){var g=!1;b=a.limit;var f=a.threshold;var m=!1;a=a.query}f||(f=this.threshold||0);if(!e&&c)return c(this.search(h,b,null,!0)),this;if(!a||!v(a))return d;h=this.encode(a);if(!h.length)return d;c=h;e=c.length;h=!0;a=[];var t=B(),q,n=0;1<e&&(this.depth?q=!0:c.sort(R));var p;if(!q||(p=this.c))for(var r=this.b;n<e;n++){var l=c[n];if(l){if(q){if(!k)if(p[l]){var k=l;t[l]=1}else if(!m)return d;
if(m&&n===e-1&&!a.length)q=!1,l=k||l,t[l]=0;else if(!k)continue}if(!t[l]){var w=[],z=!1,O=0;if(k=q?p[k]:this.f)for(var P,E=0;E<r-f;E++)if(P=k[E]&&k[E][l])w[O++]=P,z=!0;if(z)k=l,a[a.length]=1<O?w.concat.apply([],w):w[0];else{h=!1;break}t[l]=1}}}else h=!1;if(h)a:{d=[];!0===g?(g="0",f=""):f=g&&g.split(":");m=a.length;if(1<m){q=B();k=0;r=!0;h=0;var A;for(f&&(2===f.length?f=!1:f=A=parseInt(f[0],10));k<m;k++)if(t=k===m-1,p=a[k],e=p.length){if(r)if(x){n=x.length;for(c=0;c<n;c++)q["@"+x[c]]=1;var x=null;
r=!1}else{x=p;continue}l=!1;for(c=0;c<e;c++)if(n=p[c],w="@"+n,(z=q[w]||0)&&z===k){if(t){if(!A||--A<h)if(d[h++]=n,b&&h===b){d=S(g,h+(f||0),d);break a}}else q[w]=k+1;l=!0}if(!l)break}else{d=S(g,D,p);break a}x&&(d=x)}else m&&(d=a[0],f&&(f=parseInt(f[0],10)));if(b){x=d.length;f&&f>x&&(f=0);A=f||0;var D=A+b;D<x?d=d.slice(A,D):(D=0,A&&(d=d.slice(A)))}d=S(g,D,d)}return d};u.clear=function(){return this.destroy().init()};u.destroy=function(){this.f=this.c=this.a=null;return this};
function L(a,b,c){Object.defineProperty(a,b,{get:c})}function N(a,b,c,e,d,h,g,f){if(b[c])return b[c];d=d?(f-(g||f/1.5))*h+(g||f/1.5)*d:h;b[c]=d;d>=g&&(a=a[f-(d+.5>>0)],a=a[c]||(a[c]=[]),a[a.length]=e);return d}function Q(a,b){if(a)for(var c=Object.keys(a),e=0,d=c.length;e<d;e++){var h=c[e],g=a[h];if(g)for(var f=0,m=g.length;f<m;f++)if(g[f]===b){1===m?delete a[h]:g.splice(f,1);break}else"object"===typeof g[f]&&Q(g[f],b)}}
function M(a,b){for(var c=Object.keys(a),e=c.length,d=[],h="",g=0,f=0,m;f<e;f++){var t=c[f];(m=a[t])?(d[g++]=new RegExp(b?"(?!\\b)"+t+"(\\b|_)":t,"g"),d[g++]=m):h+=(h?"|":"")+t}h&&(d[g++]=new RegExp(b?"(?!\\b)("+h+")(\\b|_)":"("+h+")","g"),d[g]="");return d}function R(a,b){return b.length-a.length}function S(a,b,c){return a?{page:a,next:b?""+b:null,result:c}:c};(function(){var a=this||window,b;(b=a.define)&&b.amd?b([],function(){return K}):"object"===typeof a.exports?a.module.exports=K:a.FlexSearch=K})();}).call(this);
