import FlexSearch from"./flexsearch.js";import{is_undefined,is_object,get_keys}from"./common.js";FlexSearch.prototype.export=function(a){const b=!a||is_undefined(a.serialize)||a.serialize;let c;if(this.doc){const b=!a||is_undefined(a.doc)||a.doc,d=!a||is_undefined(a.index)||a.index;c=[];let e=0;if(d)for(const a=this.doc.keys;e<a.length;e++){const b=this.doc.index[a[e]];c[e]=[b._map,b._ctx,get_keys(b._ids)]}b&&(c[e]=this._doc)}else c=[this._map,this._ctx,get_keys(this._ids)];return b&&(c=JSON.stringify(c)),c},FlexSearch.prototype.import=function(a,b){const c=!b||is_undefined(b.serialize)||b.serialize;c&&(a=JSON.parse(a));const d={};if(this.doc){const c=!b||is_undefined(b.doc)||b.doc,e=!b||is_undefined(b.index)||b.index;let f=0;if(e){const b=this.doc.keys,c=b.length,e=a[0][2];for(;f<e.length;f++)d[e[f]]=1;for(f=0;f<c;f++){const c=this.doc.index[b[f]],e=a[f];e&&(c._map=e[0],c._ctx=e[1],c._ids=d)}}c&&(this._doc=is_object(c)?c:a[f])}else{const b=a[2];for(let a=0;a<b.length;a++)d[b[a]]=1;this._map=a[0],this._ctx=a[1],this._ids=d}};